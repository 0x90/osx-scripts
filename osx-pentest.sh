#!/bin/sh

# https://wiki-bsse.ethz.ch/display/ITDOC/Install+PostgreSQL+on+Mac+OS+X
# https://github.com/codeforamerica/ohana-api/wiki/Installing-PostgreSQL-with-MacPorts-on-OS-X
# https://coderwall.com/p/xezzaa/install-postgresql-9-2-on-os-x-mountain-lion
# https://gist.github.com/kingbin/9435292
# http://serverfault.com/questions/138676/how-to-restart-postgres-on-os-x
# https://www.nightlionsecurity.com/blog/guides/2014/11/osx-yosemite-setup-guide-metasploit-armitage-w3af/


#sudo launchctl unload /Library/LaunchDaemons/com.edb.launchd.postgresql-X.X.plist
#sudo rm -f /Library/LaunchDaemons/com.edb.launchd.postgresql-X.X.plist

sudo port install postgresql93-server
sudo port select postgresql postgresql93

sudo port install postgresql91 postgresql91-server
sudo mkdir -p /opt/local/var/db/postgresql91/defaultdb
sudo chown postgres:postgres /opt/local/var/db/postgresql91/defaultdb

# Now add /opt/local/var/db/postgresql91 to your path.
# This is necessary because OS X Lion includes a copy of posgresql and you
# need to make sure that the postgres tools point to the installed version.

#Create the user:
createuser -U postgres -s $USER
createdb $USER

sudo port select --set postgresql postgresql93

# Create user and database
createuser msf -P -h localhost
createdb -O msf msf -h localhost

